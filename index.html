let notifyAudio = null;
let soundEnabled = true;

function initAudio(){
  if (!notifyAudio){
    notifyAudio = new Audio("notify.mp3"); // MP3 liegt im Root
    notifyAudio.preload = "auto";
    notifyAudio.volume = 0.5;              // ðŸ”‰ leiser (0.0 â€“ 1.0)

    // ðŸ” genau 1 Wiederholung
    let playedOnce = false;
    notifyAudio.addEventListener("ended", () => {
      if (!playedOnce){
        playedOnce = true;
        notifyAudio.currentTime = 0;
        notifyAudio.play().catch(()=>{});
      } else {
        playedOnce = false; // Reset fÃ¼r nÃ¤chsten Alarm
      }
    });
  }
}

function playSound(){
  if (!soundEnabled) return;
  initAudio();
  try{
    notifyAudio.currentTime = 0;
    notifyAudio.play().catch(err => {
      console.warn("Audio konnte nicht abgespielt werden:", err);
    });
  }catch(e){
    console.warn("Audio-Fehler:", e);
  }
}
